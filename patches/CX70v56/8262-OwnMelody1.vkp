;CX70v56
;Собственная мелодия для каждого в адреске
;Own melody for each entry in addressbook
;(c) Lost
;Version: 1.0
;PatchID: 8262
;Details: https://patches.kibab.com/patches/details.php5?id=8262
/*
При входящем звонке телефон играет заданную для контакта в адресной книге мелодию
Имя файла мелодии нужно писать в поле "Страна" полностью, например, так: 0:\Sounds\Quake.wav
Если имя файла не указано, или файла с таким именем не существует, то будет играть мелодия для группы


Анализ функций: OwnMelody.vkp

0A:__arm int fopen
0B:__arm int fread
0D:__arm void fclose
0F:__arm unsigned int lseek
14:__arm void *malloc
15:__arm void mfree
1B:__thumb unsigned int strlen
4A:__arm void PlayFile
6E:__thumb int IsCalling
A3:__arm void ws_2str
E4:FreeRAM
117:__thumb char * strrchr 
11D:__arm void  zeromem
123:__thumb int  wstrlen 
125:__thumb WSHDR * AllocWS
129:__thumb void  FreeWS 
16C:__arm int str_2ws
16D:__thumb int UnpackABentry
16E:__thumb int FreeUnpackABentry

4 байта по адресу FreeRAM+0x7C
*/
;TYPE_SAVE,CODE
#pragma enable old_equal_ff
0x00803000: 10B5C7DFE48010BCC467201C00BD0000
0x00803010: F0402DE904D04DE20140A0E10D30A0E1
0x00803020: 8020A0E3801CA0E30A0000EF0050A0E1
0x00803030: 010075E31D00000A0D00A0E101002DE9
0x00803040: 04308DE20220A0E30010A0E30500A0E1
0x00803050: 0F0000EF0060A0E1140000EF0070B0E1
0x00803060: 04D08DE20C00000A0D00A0E101002DE9
0x00803070: 04308DE20020A0E30010A0E30500A0E1
0x00803080: 0F0000EF04308DE20620A0E10710A0E1
0x00803090: 0500A0E10B0000EF04D08DE20D10A0E1
0x008030A0: 0500A0E10D0000EF000057E30100001A
0x008030B0: 0000A0E3F280BDE81C10A0E30400A0E1
0x008030C0: 1D0100EF2830A0E3042046E2041087E2
0x008030D0: 0400A0E16D0100EF0700A0E1150000EF
0x008030E0: 0100A0E3F280BDE8F94F2DE920D04DE2
0x008030F0: 4C609DE550709DE50140A0E10250A0E1
0x00803100: 0080A0E30090A0E3E48000EF7CB0D0E5
0x00803110: 08A0A0E16E0000EF000050E35000000A
0x00803120: 02005BE34E00003A0C005BE34C00002A
0x00803130: 74019FE504108DE2000090E5B3FFFFEB
0x00803140: 000050E34600000A0010A0E3000000EA
0x00803150: 011081E2FA00DDE1000051E1200000AA
0x00803160: 10209DE50C00A0E390212BE00100DBE5
0x00803170: 010050E308009B1500005013F3FFFF0A
0x00803180: 0320DBE5280052E3F0FFFF1A230100EF
0x00803190: 010080E200008DE5140000EF00209DE5
0x008031A0: 0090A0E108009BE50910A0E1A30000EF
0x008031B0: 0D30A0E18020A0E3801CA0E30900A0E1
0x008031C0: 0A0000EF010070E30200000A0D10A0E1
0x008031D0: 0D0000EF020000EA0900A0E1150000EF
0x008031E0: 0090A0E3158000EF0010A0E104008DE2
0x008031F0: 6E0100EF000059E31900000A5C10A0E3
0x00803200: 0900A0E1170100EF014080E20400A0E1
0x00803210: 1B0000EF01A080E20A00A0E1250100EF
0x00803220: 0050A0E10A20A0E10410A0E16C0100EF
0x00803230: 0080C4E50900A0E11B0000EF018080E2
0x00803240: 0800A0E1250100EF0040A0E10820A0E1
0x00803250: 0910A0E16C0100EF0900A0E1150000EF
0x00803260: 01A0A0E380002DE940002DE928009DE5
0x00803270: 2C309DE50520A0E10410A0E14A0000EF
0x00803280: 0060A0E100005AE308D08DE20300000A
0x00803290: 0400A0E1290100EF0500A0E1290100EF
0x008032A0: 0600A0E128D08DE2F08FBDE830C36EA8
;TYPE_ENTRY
#pragma disable old_equal_ff
0x00963D74: 0400A0E1 A17CFAFA
;PATCH_ENTRY
0x0099BBA4: 102CFFEB 4F9DF9EB
;------------------------- end -------------------------

