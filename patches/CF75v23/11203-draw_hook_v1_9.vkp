;CF75v23
;Draw Hook
;Draw Hook
;(c) Dimadze
;(p) Azq2, Виктор89
;Version: 1.9
;PatchID: 11203
;Details: https://patches.kibab.com/patches/details.php5?id=11203
/*
Патч, следит за функцией DrawObject(), через которую отрисовывается практически всё на Siemens,
т.е. когда параметр содержит указатель на 5ый объект отрисовки (`IMGHDR+RECT), патч проверяет
на альфа-канал, если его нет (bpnum!=0x0A), то всё отрисовывается стандартным образом, иначе
в дело вступает самописная ф-ия отрисовки, она сделана максимально оптимизированной.
В основе её работы лежит запись битмапа изображения прямо в промежуточный буфер отрисовки,
я назвал его RamScreenPhoneCache (есть аналогичный для Java) c вычислением цвета при альфа - канале.
В итоге на SGold X65 могут отрисовывться 32 битные (24bit+alpha) изображения в эльфах, а также менять
графику используя все 32 бита, а не 8 и 16.
Даже на CX75 видна разница, по стандарту видны "разводы", с патчем изображение рисуется совершенно чётко.
Скорость отрисовки с патчем и без по моим наблюдениям не меняеться.

*/

;PATCH_DRAWOBJECT_OBJ05
0x007AF33C: F0B5051C F0B51AF2
0x007AF340: 0C1C D8ED
;PATCH_DRAWOBJECT_OBJ17
0x0084C2D8: F0B585B0061C22D0 F0B57DF190EE0000
;PATCH_REPAIRJUMP100,PATCH_DRAWOBJECT_OBJ05_J32
0x009C9EEC: 04F01FE5 1F02E1EA
0x009C9EF0: 70A720A0 02A01CEA
;PATCH_REPAIRJUMP145,PATCH_DRAWOBJECT_OBJ17_J32
0x009C9FF8: 04F01FE574A820A0 12F4E0EACE9F1CEA
;PATCH_BODY,CODE
#pragma enable old_equal_ff
0x010F1F00: 0050A0E10140A0E107402DE9142091E5
0x010F1F10: 0220D2E5F020C2E30A0052E30300001A
0x010F1F20: 0010A0E10400A0E140209FE532FF2FE1
0x010F1F30: 0740BDE8000050E31EFF2FE114D04DE2
0x010F1F40: 0060A0E107402DE9142091E5002092E5
0x010F1F50: F020C2E30A0052E30300001A0010A0E1
0x010F1F60: 0400A0E108509FE535FF2FE10780BDE8
0x010F1F70: 7D230FA1A5230FA130B50B00DC78DD78
0x010F1F80: 0200D006000EFF21091B484399786143
0x010F1F90: 4018FF2100F02AFA0C06FC20C0001040
0x010F1FA0: C010FF21491B48435978E40E69434018
0x010F1FB0: FF2100F01BFA0806800E40012418F820
0x010F1FC0: 00021040000AFF212A00891A48431978
0x010F1FD0: 51434018FF2100F009FA0806C00EC002
0x010F1FE0: 20180004000C30BDF2B581B004006069
0x010F1FF0: 00254078002802D102B0F0BD6D1C6069
0x010F2000: 41788D42F8DA00780026800001281BDA
0x010F2010: F4E70E27E75F290041430C23E35E4743
0x010F2020: 7800019F4900BF69F20F921952105B00
0x010F2030: 3818C018801847183888694600040014
0x010F2040: FFF79AFF3880361D6069017889008E42
0x010F2050: D4DA019B0C21615E7210920F92199210
0x010F2060: 891814229A5E8A42EDDB10229A5E9142
0x010F2070: E9DB0E21615E16229A5E49198A42E2DB
0x010F2080: 12229A5E9142DEDB0178406869438900
0x010F2090: 71184018C0786946C8700028D3D06269
0x010F20A0: 137852686B439B00F318D21892780A70
0x010F20B0: 6269137852686B439B00F318D2185278
0x010F20C0: 4A7063691F785B686F43BF00F719DB5D
0x010F20D0: FF288B70019800689BD12F0047437F00
0x010F20E0: 80B4DB0892085201F70FBF197F1080B4
0x010F20F0: 9A180C27E75F7F00BC460E27E75F4743
0x010F2100: 03987F008069C0196746C01980BCC019
0x010F2110: 80BC0978C908C9025118C15393E70000
0x010F2120: F3B586B0002002900390002605000298
0x010F2130: 052148430590039904AC890040180699
0x010F2140: 49694A68175C3F063F16012F00DA82E0
0x010F2150: 11180979E17000291CD0069949694968
0x010F2160: 0918C978217006994969496809188978
0x010F2170: 617006994969496808184078A07009E0
0x010F2180: 6D1C2D042D1400267F1E3F063F16012F
0x010F2190: 00DADAE00699079B0C20085E14229A5E
0x010F21A0: 81198A423FDB10229A5E91423BDB069A
0x010F21B0: 0E21525E1621595E5319994233DB0799
0x010F21C0: 9C461223C95E8C452DDBE17800292AD0
0x010F21D0: 079B1B6801936B435B0008B473009C46
0x010F21E0: 4300029842435000089A92691018C018
0x010F21F0: 6346C01808BCC0180090FF290BD1A178
0x010F2200: 6278C9089208520189182278D208D202
0x010F2210: 8918018007E0008804A900040014FFF7
0x010F2220: ABFE00990880069840690078401E8642
0x010F2230: A6DA761C36043614A6E76D1C2D042D14
0x010F2240: 00260020C043874202DA0398401C0390
0x010F2250: 7F1C3F063F16002F77D5059803998900
0x010F2260: 401806994969496809180979E1700029
0x010F2270: 11D0069A526952681218D2782270069A
0x010F2280: 52695268121892786270069A52695268
0x010F2290: 10184078A070069A079B0C20125E1420
0x010F22A0: 185E9319984245DB07989C461023C05E
0x010F22B0: 84453FDB069B0E20185E019001984019
0x010F22C0: 0090079B1620185E009B984232DB0798
0x010F22D0: 9C461223C05E84452CDB00292AD00798
0x010F22E0: 2B000068520043435B0008B473009C46
0x010F22F0: 029B434308985B008069C01880186346
0x010F2300: C01808BCC0180090FF290BD1A1786278
0x010F2310: C9089208520189182278D208D2028918
0x010F2320: 018007E0008804A900040014FFF724FE
0x010F2330: 00990880069840690078401E864200DB
0x010F2340: 7BE7761C360436147BE7002E04D10698
0x010F2350: 4069407885420FDA069A07980E21515E
0x010F2360: 40684919884207DB02980021401C0290
0x010F2370: C943884200D0DAE608B0F0BD30B50400
0x010F2380: 60690D0040880A2802D12000FFF72CFE
0x010F2390: 606940888A2803D129002000FFF7C0FE
0x010F23A0: 30BD000030B582B004000D0061696846
0x010F23B0: 49680170616989684170616909684180
0x010F23C0: 6069406901906846606140880A2803D1
0x010F23D0: 29002000FFF708FE606940888A2803D1
0x010F23E0: 29002000FFF79CFE02B030BD7847C046
0x010F23F0: 0C002DE941C0B0E1001061228CC0A0E1
0x010F2400: 40C03CE0000060220120B0E13100000A
0x010F2410: 0030A0E3200851E10118A091200451E1
0x010F2420: 0114A091A00051E12000008A200151E1
0x010F2430: 1C00008AA00151E11700008A200251E1
0x010F2440: 1200008AA00251E10D00008A200351E1
0x010F2450: 0800008AA00351E10300008A810350E1
0x010F2460: 810340200330A3E0010350E101034020
0x010F2470: 0330A3E0810250E1810240200330A3E0
0x010F2480: 010250E1010240200330A3E0810150E1
0x010F2490: 810140200330A3E0010150E101014020
0x010F24A0: 0330A3E0810050E1810040200330A3E0
0x010F24B0: 010050E1010040200330A3E0020051E1
0x010F24C0: 2114A081E4FFFF8A0310A0E18C3FB0E1
0x010F24D0: 00106122000060420C00BDE81EFF2FE1
#pragma disable old_equal_ff

;------------------------- end -------------------------

