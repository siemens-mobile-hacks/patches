;S75v47
;Загрузчик эльфов
;ELF Loader
;(c) Rst7/CBSIE, BoBa
;Version: 2.0
;! доступна новая версия патча, https://patches.kibab.com/patches/details.php5?id=7254
;PatchID: 6889
;Details: https://patches.kibab.com/patches/details.php5?id=6889
;!к патчу прикреплён файл, https://patches.kibab.com/cnt.php5?d=s75v47&f=ELFLoader_v2_0.zip

/*
Загрузка всех .elf-файлов из каталога 4:\ZBin\Daemons
Загрузка необходимых .elf файлов при выборе файла с произвольным расширением
Обрабатывается при помощи ExtD.elf - необходим в каталоге 4:\ZBin\Daemons
по файлу 4:\ZBin\etc\extension.cfg. Формат файла:
>>>>---
; ;Это комментарий, он начинается с символа ;
; 
; ;Универсальные для тех, у кого не указано какое-либо поле
; 
; RUN=4:\ZBin\TED\TED.elf
; SMALL=4:\ZBin\img\UNK_SMALL.png
; BIG=4:\ZBin\img\UNK_LARGE.png
; ALTRUN=4:\ZBin\TED\TED.elf
; 
; ;первый, расширение txt очень желательно указывать, т.к. по нему открываются неизвестные файлы
; [txt]
; SMALL=4:\ZBin\img\TXT_SMALL.png
; BIG=4:\ZBin\img\TXT_LARGE.png
; 
; ;второй
; [bcfg]
; RUN=4:\ZBin\utilities\CfgEdit.elf
; SMALL=4:\ZBin\img\BCFG_SMALL.png
; BIG=4:\ZBin\img\BCFG_LARGE.png
; 
; ; и т.д.
; 
; ; если поле не указано, то оно берется из первых
; ---<<<<<
;
Для упрощения формирования структуры каталогов разархивируйте в корень MMC архив ELFLoader_v2_0.zip с сохранением путей.
;
;+Расширение таблицы регистрации расширений файлов
;
;+Очередной перенос HELPER_PROC на cepid=440A для более корректной работы
; с жабой
;
;+Расширение PIT при помощи .png файлов
; Обрабатываются файлы из каталога 4:\ZBin\img\ с именами %d.png
; для замены штатных картинок или из эльфов - указатель на строку
; с именем файла вместо ID (аналогично ESI)
*/

;SWILIB_FUNC171,SWILIB_FUNC172
#pragma enable old_equal_ff
0x000745C4: B09107A09C9107A0
;SWILIB_FUNC19C
0x00074670: D59107A0
;SWILIB_FUNC1B8_1BB
0x000746E0: F4ABD7A8F8ABD7A8F0ABD7A8FCABD7A8
;CODE,DATA_C
0x00078100: 11FF2FE1360100EB0100A0E3F081BDE8
0x00078110: 0F402DE94F0100EB0070A0E10040A0E3
0x00078120: 0F80BDE8005080E20F402DE9490100EB
0x00078130: 0060A0E10F80BDE80010A0E30F402DE9
0x00078140: 440100EB0050A0E10F80BDE80F402DE9
0x00078150: 400100EB0070A0E10050A0E30F80BDE8
0x00078160: 04E02DE500200FE1040000EF00100FE1
0x00078170: C01081E301F021E10000A0E10000A0E1
0x00078180: 0000A0E17AFF17EE0000A0E10000A0E1
0x00078190: 0000A0E1FAFFFF1A0000A0E39A0F07EE
0x000781A0: 0000A0E10000A0E10000A0E10000A0E1
0x000781B0: 150F07EE0000A0E10000A0E10000A0E1
0x000781C0: 0000A0E102F021E104F09DE400402DE9
0x000781D0: 1D0100EF0080BDE87FB5FFB00025ED43
0x000781E0: 0595642166A8FFF7F2EF7F9800246B46
0x000781F0: 802211020ADF0190002801D528003EE1
0x00078200: 6B46342209A90BDF342805D001986946
0x00078210: 0DDF0120C04332E109989A49884204D0
0x00078220: 019869460DDF0220F4E709A8808D0B28
0x00078230: 02D30820C04322E1049416AD083511E0
0x00078240: 306801280AD128680599884200D20590
0x00078250: E9684018844201D22868441804982035
0x00078260: 401C0490049809A9898D884227DA08A8
0x00078270: 01B4119805990AAE768D01AB00227143
0x00078280: 411802980FDF1199059A0AAB5B8D01B0
0x00078290: 5A438918884204D0019869460DDF0320
0x000782A0: B8E701982E00083E6B46202231000BDF
0x000782B0: 2028C5D0019869460DDF0420BAE70598
0x000782C0: 251A280014DF040004D1019869460DDF
0x000782D0: 0D209FE72900FFF77AEF0020049016A8
0x000782E0: 083053E02868012802D0022817D0B0E0
0x000782F0: 02988268002A44D0006805996B46401A
0x00078300: 211801980BDF02998968884239D00198
0x00078310: 69460DDF200015DF0A20C043AFE00298
0x00078320: 806814DF0390002806D1019869460DDF
0x00078330: 200015DF06206DE70298039982680198
0x00078340: 6B460BDF02998968884208D001986946
0x00078350: 0DDF039815DF200015DF07206AE70398
0x00078360: 66AA05E0192902DA4368890053500830
0x00078370: 01680029F6D17899002000292ED10398
0x00078380: 15DF0498401C04900298203002900598
0x00078390: 41420791049809A9898D884260DA029D
0x000783A0: 684601B4083D696801AB029800220FDF
0x000783B0: 696801B0884295D0019869460DDF2000
0x000783C0: 15DF052026E7039DEB189A18059B5218
0x000783D0: 116862581219D21A6250401C789AC100
0x000783E0: 9142CCD20299779B0968039D4A42C100
0x000783F0: AD186D18ED186D682D062D0E0695FF2D
0x00078400: EBD0FD2DDFD0079D069E6519002EE4D0
0x00078410: 022E02D0172E09D012E0039EF3189A18
0x00078420: 521811686A5812196A50D6E7039EF318
0x00078430: 9A18059B521811686A581219D21AF3E7
0x00078440: 019869460DDF200015DF039815DF0C20
0x00078450: 63E7019869460DDF200015DF0B20D9E6
0x00078460: 019869460DDF00F051F9079D0F9E829B
0x00078470: 819A80997F98A4196419A04700207FB0
0x00078480: 04B070BD7F454C4610B5A0B069461400
0x00078490: 7E22A3DF0023002221006846FFF79CFE
0x000784A0: 002801D0002000E0012020B010BD0000
0x000784B0: 10402DE90040A0E10A00A0E3440C80E3
0x000784C0: 540100EF0C009FE5001090E50400A0E1
0x000784D0: 1040BDE809FFFFEA009007A010402DE9
0x000784E0: 48D04DE240DE4DE20140A0E1D20F8DE2
0x000784F0: 1A0000EF74109FE5D20F8DE2170000EF
0x00078500: 0D20A0E1D21F8DE204008DE26B0000EF
0x00078510: 000050E30F00000A0410A0E1D20F8DE2
0x00078520: 1A0000EFB9108DE2D20F8DE2170000EF
0x00078530: 0030A0E30020A0E30210A0E1D20F8DE2
0x00078540: 24FFFFFA0D10A0E104008DE26C0000EF
0x00078550: 000050E3EFFFFF1A0D10A0E104008DE2
0x00078560: 6D0000EF48D08DE240DE8DE21080BDE8
0x00078570: 148707A030402DE930509FE50040A0E1
0x00078580: F90200EB140085E28C0000EF20009FE5
0x00078590: 0520A0E10010A0E3710100EF14009FE5
0x000785A0: 001090E50400A0E13040BDE8D3FEFFEA
0x000785B0: 1C8707A0DC8407A0049007A080280BDB
0x000785C0: 0649081880380078802805DB044AFF21
0x000785D0: C94340001018405A7047C046B08707A0
0x000785E0: 308807A030402DE90010A0E30040A0E1
0x000785F0: 0250A0E1260100EF030000EAEEFFFFFA
0x00078600: 0010A0E10400A0E11C0000EF0100D5E4
0x00078610: 000050E3F8FFFF1A3080BDE830402DE9
0x00078620: 0040A0E10F00A0E3250100EF0050A0E1
0x00078630: 071F8FE2240100EF0020A0E30510A0E1
0x00078640: 0400A0E1940000EF0500A0E1290100EF
0x00078650: 3080BDE87478740010402DE984409FE5
0x00078660: 000094E5000050E30400001A0400A0E3
0x00078670: 140000EF0010A0E3001080E5000084E5
0x00078680: 040080E21080BDE8F0412DE954409FE5
0x00078690: 460100EF005094E52800A0E3006095E5
0x000786A0: 900607E02C0087E2140000EF0080A0E1
0x000786B0: 042087E20510A0E11E0100EF010086E2
0x000786C0: 000088E50500A0E1150000EF008084E5
0x000786D0: 470100EF0A00A0E3900601E0010188E0
0x000786E0: 040080E2F081BDE8F4ABD7A8054A00B5
0x000786F0: 914203D0044A1268904700BD3000FFF7
0x00078700: 8EEF00BDD11D0000089007A0004B1847
0x00078710: 608107A02A2E656C66000000343A5C5A
0x00078720: 42696E5C4461656D6F6E735C00000000
0x00078730: 8C8707A05500000000089D05A08707A0
0x00078740: A88707A0908707A0988707A0FBC0FF7F
0x00078750: 898407A000000000343A5C5A42696E5C
0x00078760: 696D675C656C665F736D616C6C2E706E
0x00078770: 67000000343A5C5A42696E5C696D675C
0x00078780: 656C665F6269672E706E6700656C6600
0x00078790: 4F70656E00000000416C744F70656E00
0x000787A0: 588707A000000000748707A000000000
0x000787B0: 5F5F275F223AC5D85F255F3C5F5F5F5F
0x000787C0: 5F27272222072D2D5F545F3E5F5F5F5F
0x000787D0: FFF6F75FFD83B315F063F23CBF2D52F4
0x000787E0: F82B4969A3E714FAF1FCF33E5F5F5FF5
0x000787F0: 808182838485868788898A8B8C8D8E8F
0x00078800: 909192939495969798999A9B9C9D9E9F
0x00078810: A0A1A2A3A4A5A6A7A8A9AAABACADAEAF
0x00078820: E0E1E2E3E4E5E6E7E8E9EAEBECEDEEEF
0x00078830: 10041104120413041404150416041704
0x00078840: 180419041A041B041C041D041E041F04
0x00078850: 20042104220423042404250426042704
0x00078860: 280429042A042B042C042D042E042F04
0x00078870: 30043104320433043404350436043704
0x00078880: 380439043A043B043C043D043E043F04
0x00078890: 2D002D002D00A6002B00A600A600AC00
0x000788A0: AC00A600A600AC002D002D002D00AC00
0x000788B0: 4C002B0054002B002D002B00A600A600
0x000788C0: 4C003304A6005400A6003D002B00A600
0x000788D0: A600540054004C004C002D0033042B00
0x000788E0: 2B002D002D002D002D00A600A6002D00
0x000788F0: 40044104420443044404450446044704
0x00078900: 480449044A044B044C044D044E044F04
0x00078910: 0104510404045404070457040E045E04
0x00078920: B0002220B70076001621A400A600A000
0x00078930: 312E322E35000000343A5C5A42696E5C
0x00078940: 696D675C000000002E706E6700000000
;RET_ADRS
0x00079000: FBED2FA0E5EB2FA0237297A00475A2A0
0x00079010: C35697A0
;HELPER_PROC,HELPER_PROC_DATA
0x00079100: 00402DE914D04DE20D00A0E1530100EF
0x00079110: 000050E31200000A04309DE508009DE5
0x00079120: 010053E30600001A0C209DE5000052E3
0x00079130: 0B00000A10109DE532FF2FE114D08DE2
0x00079140: 0080BDE801002DE904209DE5AE10A0E3
0x00079150: DE1C81E30900A0E3420C80E3000100EF
0x00079160: 04D08DE214D08DE20080BDE800402DE9
0x00079170: 1C209FE51C109FE50000A0E301002DE9
0x00079180: 8030A0E30A00A0E3440C80E3050100EF
0x00079190: 0180BDE8009107A0E09107A000402DE9
0x000791A0: 460100EF410100EF470100EF0080BDE8
0x000791B0: 00402DE904002DE90030A0E10A00A0E3
0x000791C0: 440C80E30120A0E10110A0E3000100EF
0x000791D0: 0180BDE810B514008847200015DF10BD
0x000791E0: 48454C5045520000
;PIT_PNG_EXTENSION
0x00079500: 10402DE90040A0E11F0100EB000050E3
0x00079510: 1080BD180400A0E114C51FE53CFF2FE1
0x00079520: 040050E11CC51FE51CFF2FE100B50800
0x00079530: 14DF00BD00B5080015DF00BD30402DE9
0x00079540: 04D04DE20140A0E10250A0E15E0100EF
0x00079550: 000090E50D30A0E10520A0E10410A0E1
0x00079560: 0B0000EF3180BDE8F0412DE928D04DE2
0x00079570: 0040A0E300408DE504408DE50C308DE2
0x00079580: 8020A0E3801CA0E30A0000EF08008DE5
0x00079590: 010070E33300000A0C00A0E3140000EF
0x000795A0: 0050A0E1004085E5044085E5084085E5
0x000795B0: 08009DE50C308DE20820A0E320108DE2
0x000795C0: 0B0000EF080050E31B00001A0810A0E3
0x000795D0: 20008DE2B20100EF000050E31600000A
0x000795E0: D0029FE501002DE9CC029FE501002DE9
0x000795F0: 0000A0E301002DE90030A0E10020A0E1
0x00079600: 0010A0E1B4029FE5A80100EF0C008DE5
0x00079610: 000050E30CD08DE20700000A560100EF
0x00079620: 04008DE5000050E31100001A0020A0E3
0x00079630: 0210A0E10D00A0E1570100EF000095E5
0x00079640: 150000EF040095E5150000EF080095E5
0x00079650: 150000EF0500A0E1150000EF08009DE5
0x00079660: 0C108DE20D0000EF0000A0E328D08DE2
0x00079670: F081BDE800009DE5620100EF000050E3
0x00079680: 0020A01304108D12E9FFFF1A30229FE5
0x00079690: 00009DE508108DE2A90100EF00009DE5
0x000796A0: 0810A0E3580100EF04109DE500009DE5
0x000796B0: 590100EF0000A0E301002DE901002DE9
0x000796C0: 01002DE924008DE201002DE92C008DE2
0x000796D0: 01002DE918109DE528308DE214009DE5
0x000796E0: 24208DE25A0100EF30009DE514D08DE2
0x000796F0: 100050E30100001A00009DE5AF0100EF
0x00079700: 1C009DE5080050E3010000AA00009DE5
0x00079710: B00100EF18009DE5030050E30100001A
0x00079720: 00009DE5AB0100EF18009DE5000050E3
0x00079730: 040050130100001A00009DE5B10100EF
0x00079740: 00009DE504109DE51020A0E3AC0100EF
0x00079750: 000050E30100000A00009DE5AD0100EF
0x00079760: 00009DE50120A0E3FF10A0E3AE0100EF
0x00079770: 04109DE500009DE50080A0E3AA0100EF
0x00079780: 00009DE504109DE55F0100EF140000EF
0x00079790: 000085E50800A0E3140000EF0060A0E1
0x000797A0: 086085E510009DE514109DE5910000E0
0x000797B0: 8000A0E1140000EF040085E50070A0E1
0x000797C0: 000000EA018088E214009DE5000058E1
0x000797D0: 1B00002A001095E500009DE50020A0E3
0x000797E0: 600100EF0400A0E17ECEA0E30A0000EA
0x000797F0: 0020D1E5F83CA0E3022403E00130D1E5
0x00079800: 0210D1E583310CE0022083E1A111A0E1
0x00079810: 021081E1B210C7E0010080E210109DE5
0x00079820: 010050E1E6FFFF2A001095E5001181E0
0x00079830: 0320D1E5000052E3ECFFFF1AE01CA0E3
0x00079840: F3FFFFEA080095E50810A0E3B210C0E1
0x00079850: 080095E510109DE50010C0E5080095E5
0x00079860: 14109DE50110C0E5080095E5041095E5
0x00079870: 041080E504109DE500009DE55D0100EF
0x00079880: 0020A0E304108DE20D00A0E1570100EF
0x00079890: 000095E5150000EF0500A0E1150000EF
0x000798A0: 08009DE50C108DE20D0000EF0600A0E1
0x000798B0: 28D08DE2F081BDE8359507A02D9507A0
0x000798C0: 308907A03C9507A007E0412A02DB5B2A
0x000798D0: 00DA2032491C0270401C0A78002AF4D1
0x000798E0: 00210170704700003030A0E3010000EA
0x000798F0: 010040E0013083E2010050E1FBFFFF2A
0x00079900: 0030C2E51EFF2FE110402DE90040A0E1
0x00079910: 0100A0E10A0050E31600003A640050E3
0x00079920: 1000003AFA0F50E30A00003A1010A0E3
0x00079930: 9C1D81E3010050E10200003A0420A0E1
0x00079940: E8FFFFEB014084E20420A0E1FA1FA0E3
0x00079950: E4FFFFEB014084E20420A0E16410A0E3
0x00079960: E0FFFFEB014084E20420A0E10A10A0E3
0x00079970: DCFFFFEB014084E2300080E20100C4E4
0x00079980: 0000A0E30000C4E51080BDE8F0432DE9
0x00079990: 40DF4DE20040A0E1240EA0E10A0050E3
0x000799A0: 0300001A0410A0E10D00A0E1C5FFFFFA
0x000799B0: 080000EA50519FE50D00A0E10510A0E1
0x000799C0: C0FFFFFA0410A0E1CEFFFFEB101085E2
0x000799D0: 0D00A0E1170000EF30519FE5460100EF
0x000799E0: 0560A0E10070A0E30080A0E3000000EA
0x000799F0: 0680A0E1006096E5000056E30E00000A
0x00079A00: 040096E50D10A0E1190000EF000050E3
0x00079A10: F6FFFF1A000058E30400000A000096E5
0x00079A20: 000088E5000095E5000086E5006085E5
0x00079A30: 470100EF080096E51A0000EA470100EF
0x00079A40: 0D00A0E1C7FEFFEB0060A0E10C00A0E3
0x00079A50: 140000EF0040A0E10D00A0E11B0000EF
0x00079A60: 010080E2140000EF040084E50D10A0E1
0x00079A70: 1A0000EF086084E5460100EF000095E5
0x00079A80: 0090A0E3000084E5004085E50560A0E1
0x00079A90: 0680A0E1006096E5000056E30300001A
0x00079AA0: 470100EF080094E540DF8DE2F083BDE8
0x00079AB0: 019089E2330059E3F4FFFF3A007088E5
0x00079AC0: 470100EF080096E5000050E30300000A
0x00079AD0: 040090E5150000EF080096E5150000EF
0x00079AE0: 040096E50680A0E1150000EF006096E5
0x00079AF0: 0800A0E1150000EF000056E3F0FFFF1A
0x00079B00: 080094E540DF8DE2F083BDE8388907A0
0x00079B10: F8ABD7A8
;PATCH_ONCREATE
#pragma disable old_equal_ff
0x0042DF10: E5EB2FA0 748507A0
;PATCH_ONCLOSE
0x0042DF24: FBED2FA0 B08407A0
;PATCH_EXT2_JUMPERS
0x004CE9A4: 0A43747841455F50535F4669 0CF09FE50CF09FE50CF09FE5
0x004CE9B0: 6E6446696C65496E576F726B4469725F 0CF09FE50CF09FE5108107A0248107A0
0x004CE9C0: 436C6F7365282920456E7472 388107A04C8107A0888607A0
;PATCH_EXT2_R5R7
0x004D3E20: 0025284F FAF7C6ED
;PATCH_EXT2_CLUST2
0x004D3E40: 2048 3800
;PATCH_EXT2_R5R1
0x004D3F1E: D84D FAF7
0x004D3F20: 0021 46ED
;PATCH_EXT2_R4R7
0x004D40B6: 0024714F FAF776EC
;PATCH_EXT2_CLUST1
0x004D40E2: 6748 3800
;PATCH_EXT2_IMPL
0x004D4100: 5F4A043A11683C2909DA28204843131D FAF758ECC046C046C046C046C046C046
0x004D4110: C01801311160 C046C046C046
;PATCH_EXT2_R6R5
0x004D41D0: 2B4E051C FAF7EAEB
;PATCH_NO_BROWSE_TXT
0x0054B726: 0830 3030
;PATCH_SHOWMSG_BLF
0x0065D9C8: 237297A0 ED8607A0
;PATCH_ESI1
0x0090637C: C88701FA 08F09FE5
;PATCH_ESI2
0x0090638C: 7C25647C 048107A0
;PATCH_GET_PIT,PATCH_GET_PITJ
0x009756B8: 10B5041CB1F022EF 00490847009507A0

;------------------------- end -------------------------

