;M55v91
;SMS-транслит
;SMS-translit
;(c) Chaos,AlexSid,Matr!x,!Freeman!
;(r) (I)dnn
;Version: 
;PatchID: 1849
;Details: https://patches.kibab.com/patches/details.php5?id=1849
/*
 SMS транслит.
 1. В "Опции" редактора SMS вместо "Удал.текст" появляется пункт "Транс", 
 который при наличии в тексте русских букв перекодирует SMS в транслит.
 2. По умолчанию при прямом выборе этого пункта меню используется таблица ХАКЕР.
 3. После реальной перекодировки, если вы не меняли текст или после прямой 
 перекодировки не увеличивали длину СМС и длина осталась прежней, повторный
 вызов пункта меню восстанавливает содержание СМС до предыдущей перекодировки.
 4. При попытке отправить СМС через "Зеленую кнопку" или "Опции"/Передать
 проверяется количество получающихся СМС для отправки в СМС-центр. Если их
 больше двух, выдается запрос на подтверждение автоматической перекодировки
 транслитом. В случае отказа по красной кнопке происходит возврат в редактор.
 В случае отказа по "Нет" продолжается процедура отправки СМС. 
 При утвердительном ответе СМС перекодируется по таблице Civil (обычный 
 транслит) и по умолчанию идет возврат в редактор.
 Начала таблиц (для представления)
 TableXAKEP  db "A",0,   "6",0,   "B",0,   "|","'", "D",0,   "E",0, ">","K", "3",0
             db "U",0,   "U","'",  "K",0,  "/","\", "M",0,   "H",0, "O",0,   "/","7"     
 TableCivil  db "A",0,   "B",0,   "V",0,  "G",0,  "D",0, "E",0, "Z","H", "Z",0
             db "I",0,   "J",0,   "K",0,  "L",0,  "M",0, "N",0, "O",0,   "P",0     


 Vibra after connection of outcoming call.
 

English: This patch is usefull only for russians.
*/

; Местa вставки
; patched points
; Зеленая кнопка
000B5784: DAA0D660 DA5500B5
; Опции/Передать
000B7250: DAA0D660 DA5500B5
; Опции/Транс
000B7286: F0C8F0D9DA9B745B DA5538B50D68CC00

; Код патча
; patch code
0035B500: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF D7400400F2F1AE3948128D10E01CE6FD
0035B510: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF A311E6FE30B5E6FF5500FA9940B6E6FC
0035B520: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF C81BE6FD1100E6FEFC00E07FFAA0D660
0035B530: FFFFFFFFFFFFFFFF 48C18D022DF4DB00
0035B538: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF E6F9443648C52D0206F98400E6FEC819
0035B548: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF E0EFE6FC3836E06DDC5F981E98FED740
0035B558: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 560198EC00E128D13DF7DC4F987E2D50
0035B568: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 8870E008E002DC4F981EBB4B49902D01
0035B578: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 088128713DF89870F0DE00D800D80087
0035B588: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 48203D1AF0DEDC5F986EA88E46F6AAAA
0035B598: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 3D3720D7088120D7F03828D2F05FF04E
0035B5A8: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF F0BFF0ADDAF556FE00D800D8E6F6EEEE
0035B5B8: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 08D2DC5FB86D0D2488D088E0F037E6F6
0035B5C8: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF AAAA0831DC4FB86D20E308D220E3F05F
0035B5D8: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF F04EF0BFF0ADDAF556FE98E098D028E2
0035B5E8: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF DC4FA81EBB0EC0962D02DC4F886DC086
0035B5F8: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 3D01F061DC4F886D28713DF1DC4F888D
0035B608: FFFF DB00
0035B60A: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF E00446F101043D03E6F150040D0646F1
0035B61A: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 10048D0C46F152049D09F041082126F4
0035B62A: FFFFFFFFFFFFFFFFFFFFFFFFFFFF 10045C140049D7405601A844CB00
0035B638: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 0A002C00000008002200060041003600
0035B648: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 42007C27440045003E4B330055005527
0035B658: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 4B002F5C4D0048004F002F3750004300
0035B668: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 540059004F505800552C34004C55572C
0035B678: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 27626249620033004B29357C61003600
0035B688: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF DF007200670065003E6B33007500F900
0035B698: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 6B002F5C4D0048006F006E0070006300
0035B6A8: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 6D00790063707800752C34007700772C
0035B6B8: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 2762626C620033006B3E2C71C900E900
0035B6C8: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 4100420056004700440045005A485A00
0035B6D8: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 49004A004B004C004D004E004F005000
0035B6E8: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 52005300540055004600480043004348
0035B6F8: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 53485348270049002700450059555941
0035B708: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 6100620076006700640065007A687A00
0035B718: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 69006A006B006C006D006E006F007000
0035B728: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 72007300740075006600680063006368
0035B738: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 73687368270069002700650079757961
0035B748: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 594F796F534D535472616E736C697420
0035B758: FFFFFFFFFFFFFFFF 76312028646E6E29

;ссылки на "Удал.текст" -> ссылки "Транс" в меню СМС "Опции"
37E590: 25032503 600B600B

;Редактирование сообщения 99 : 11A3  "Normal Dummie----1" => "Сжать транслитом"
;Отображается в окне запроса транслитерации
45DBD3: 954E6F726D616C2044756D6D69652D2D2D2D3100 9B213630424C95209B4240303D413B38423E3C00

; Доп.настройки
; 1.а.
; 035B53E: 2D02 CC00 ;Всегда использовать таблицу Civil
; 1.б.
; 035B53E: 2D02 3D02 ;Инверсия поведения использования таблиц
                     ;По Опции/Транс использовать таблицу Civil, 
                     ;в автотранслите - ХАКЕР
; 1.в.
; 035B53E: 2D02 0D02 ;Всегда использовать таблицу ХАКЕР
; 2.а.
; 035B534: 2DF4 0DF4 ;При нажатии красной кнопки в запросе на транслит
                     ;идти на отправку СМС
; 2.б.
; 035B536: DB00 CC00 ;При нажатии красной кнопки в запросе на транслит
                     ;идти на перекодировку


;------------------------- end -------------------------

