;CX75v25
;Собственная мелодия для каждого в адреске
;Own melody for each entry in addressbook
;(c) Lost
;(p) sempai
;Version: 
;PatchID: 8377
;Details: https://patches.kibab.com/patches/details.php5?id=8377
/*
При входящем звонке телефон играет заданную для контакта в адресной книге мелодию
Имя файла мелодии нужно писать в поле "Страна" полностью, например, так: 0:\Sounds\Quake.wav
Если имя файла не указано, или файла с таким именем не существует, то будет играть мелодия для группы.

*/

; * Собственная мелодия для каждого в адреске * 
; * Own melody for each entry in addressbook *
; (c) Lost 04.02.2008
; (p) sempai
; CX75v25
/*
При входящем звонке телефон играет заданную для контакта в адресной книге мелодию
Имя файла мелодии нужно писать в поле "Страна" полностью, например, так: 0:\Sounds\Quake.wav
Если имя файла не указано, или файла с таким именем не существует, то будет играть мелодия для группы


Анализ функций: OwnMelody.vkp

0A:__arm int fopen
0B:__arm int fread
0D:__arm void fclose
0F:__arm unsigned int lseek
14:__arm void *malloc
15:__arm void mfree
1B:__thumb unsigned int strlen
4A:__arm void PlayFile
6E:__thumb int IsCalling
A3:__arm void ws_2str
E4:FreeRAM
117:__thumb char * strrchr 
11D:__arm void  zeromem
123:__thumb int  wstrlen 
125:__thumb WSHDR * AllocWS
129:__thumb void  FreeWS 
16C:__arm int str_2ws
16D:__thumb int UnpackABentry
16E:__thumb int FreeUnpackABentry

4 байта по адресу FreeRAM+0x7C
*/

;TYPE_SAVE,CODE
#pragma enable old_equal_ff
0x001B0000: 10B5C7DFE48010BCC467201C00BD0000
0x001B0010: F0402DE904D04DE20140A0E10D30A0E1
0x001B0020: 8020A0E3801CA0E30A0000EF0050A0E1
0x001B0030: 010075E31D00000A0D00A0E101002DE9
0x001B0040: 04308DE20220A0E30010A0E30500A0E1
0x001B0050: 0F0000EF0060A0E1140000EF0070B0E1
0x001B0060: 04D08DE20C00000A0D00A0E101002DE9
0x001B0070: 04308DE20020A0E30010A0E30500A0E1
0x001B0080: 0F0000EF04308DE20620A0E10710A0E1
0x001B0090: 0500A0E10B0000EF04D08DE20D10A0E1
0x001B00A0: 0500A0E10D0000EF000057E30100001A
0x001B00B0: 0000A0E3F280BDE81C10A0E30400A0E1
0x001B00C0: 1D0100EF2830A0E3042046E2041087E2
0x001B00D0: 0400A0E16D0100EF0700A0E1150000EF
0x001B00E0: 0100A0E3F280BDE8F94F2DE920D04DE2
0x001B00F0: 50609DE554709DE50140A0E10250A0E1
0x001B0100: 0080A0E30090A0E3E48000EF7CB0D0E5
0x001B0110: 08A0A0E16E0000EF000050E35000000A
0x001B0120: 02005BE34E00003A0C005BE34C00002A
0x001B0130: 7C019FE504108DE2000090E5B3FFFFEB
0x001B0140: 000050E34600000A0010A0E3000000EA
0x001B0150: 011081E2FA00DDE1000051E1200000AA
0x001B0160: 10209DE50C00A0E390212BE00100DBE5
0x001B0170: 010050E308009B1500005013F3FFFF0A
0x001B0180: 0320DBE5280052E3F0FFFF1A230100EF
0x001B0190: 010080E200008DE5140000EF00209DE5
0x001B01A0: 0090A0E108009BE50910A0E1A30000EF
0x001B01B0: 0D30A0E18020A0E3801CA0E30900A0E1
0x001B01C0: 0A0000EF010070E30200000A0D10A0E1
0x001B01D0: 0D0000EF020000EA0900A0E1150000EF
0x001B01E0: 0090A0E3158000EF0010A0E104008DE2
0x001B01F0: 6E0100EF000059E31900000A5C10A0E3
0x001B0200: 0900A0E1170100EF014080E20400A0E1
0x001B0210: 1B0000EF01A080E20A00A0E1250100EF
0x001B0220: 0050A0E10A20A0E10410A0E16C0100EF
0x001B0230: 0080C4E50900A0E11B0000EF018080E2
0x001B0240: 0800A0E1250100EF0040A0E10820A0E1
0x001B0250: 0910A0E16C0100EF0900A0E1150000EF
0x001B0260: 01A0A0E380002DE940002DE954009DE5
0x001B0270: 0520A0E101002DE930309DE52C009DE5
0x001B0280: 0410A0E14A0000EF0060A0E100005AE3
0x001B0290: 0CD08DE20300000A0400A0E1290100EF
0x001B02A0: 0500A0E1290100EF0600A0E128D08DE2
0x001B02B0: F08FBDE8100453A8
;TYPE_ENTRY
#pragma disable old_equal_ff
0x002F1200: 0400A0E1 7EFBFAFA
;PATCH_ENTRY
0x0036607C: 4C3AFEEB 1928F9EB

;------------------------- end -------------------------

