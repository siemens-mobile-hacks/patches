;E71v45
;Вывод сообщения вместо пикоффа
;Message box instead of pick-off
;(c) Dimadze
;Version: T0004
;PatchID: 10059
;Details: https://patches.kibab.com/patches/details.php5?id=10059
/*
Заменяем пикофф сообщением
Патч пытается заглушить пикофф сообщением
(Ключевое слово "пытается")

В текущую версию патча входят:
1) Перехватчик ф-ий записи имени ошибки при пикоффе
2) Замена (Нейтрализация) ф-ии записи в (S)Exit данных (которая и выключает телефон)
3) Обработчики 3-х исключений: Data Abort, Prefetch Abort, Undefined Instruction
4) Визуализация в виде сообщения с ошибкой
5) Собственный логгер ошибок с расширенной информацией (0:\errors.log (50 кб))
*/

;CODE,INITTAB,DATA_C
#pragma enable old_equal_ff
0x0008D000: 9CD09FE507008DE804E04EE200104FE1
0x0008D010: 00200FE19F20C2E31F2082E302F021E1
0x0008D020: F85F2DE9EE0000EB78C09FE507009CE8
0x0008D030: F89FFDE868D09FE507008DE804E04EE2
0x0008D040: 0E00A0E100104FE100200FE19F20C2E3
0x0008D050: 1F2082E302F021E1F85F2DE90D0100EB
0x0008D060: 3CC09FE507009CE8F89FFDE838D09FE5
0x0008D070: 07008DE804E04EE20E00A0E100104FE1
0x0008D080: 00200FE19F20C2E31F2082E302F021E1
0x0008D090: F85F2DE92C0100EB0CC09FE507009CE8
0x0008D0A0: F89FFDE8101108000011080020110800
0x0008D0B0: 1F402DE9520100EB1F40BDE80050A0E1
0x0008D0C0: 1EFF2FE100B5C906C90E10390F2920D8
0x0008D0D0: 01A2525C9744C04610161C223A3A3A28
0x0008D0E0: 3A3A3A2E3A3A3A340BA116DF00BD0BA1
0x0008D0F0: 16DF00BD0AA116DF00BD0AA116DF00BD
0x0008D100: 09A116DF00BD09A116DF00BD08A116DF
0x0008D110: 00BD08A116DF00BD5553520046495100
0x0008D120: 495251005356430041425400554E4400
0x0008D130: 535953002D3F2D00CA0F01D04E2200E0
0x0008D140: 6E2202708022D2050A40920F01D05A22
0x0008D150: 00E07A224270802292050A40520F01D0
0x0008D160: 432200E063228270802252050A40120F
0x0008D170: 01D0562200E07622C270802212050A40
0x0008D180: D20E01D0512200E07122027180220A40
0x0008D190: D20901D0492200E06922427140220A40
0x0008D1A0: 920901D0462200E06622827120220A40
0x0008D1B0: 510902D05421C17170477421C1717047
0x0008D1C0: 10B58BB06A460024E44301A984DFA042
0x0008D1D0: 01D1200000E002980BB010BD30402DE9
0x0008D1E0: 021081E20040A0E10250A0E11E0100EF
0x0008D1F0: 0000A0E30010A0E3010055E30A0000BA
0x0008D200: 0420A0E10030D2E5F30053E30130D214
0x0008D210: 000053130410C0070000A0033080BD08
0x0008D220: 010080E2050050E1F5FFFFBA0410C5E7
0x0008D230: 0100A0E33080BDE8FA4F2DE99C819FE5
0x0008D240: 1CD04DE250509DE554609DE558709DE5
0x0008D250: 0040A0E102B0A0E10800A0E1D7FFFFFA
0x0008D260: 0110A0E3C81C81E3010050E1020000BA
0x0008D270: 0010A0E30800A0E16B0100EF0030A0E3
0x0008D280: 602FA0E30A10A0E3411C81E30800A0E1
0x0008D290: 0A0000EF0090A0E1400EA0E3140000EF
0x0008D2A0: 00A0A0E108108DE20D00A0E1B40000EF
0x0008D2B0: 000057E31900001A1C109DE510008DE2
0x0008D2C0: 9CFFFFFA00009DE50B30A0E101002DE9
0x0008D2D0: 0800DDE50520A0E1101088E201002DE9
0x0008D2E0: 0D00DDE501002DE91600DDE501002DE9
0x0008D2F0: 1900DDE501002DE91C00DDE501002DE9
0x0008D300: 28008DE201002DE968009DE501002DE9
0x0008D310: 3C009DE501002DE910002DE9140000EA
0x0008D320: 010057E31500001A00009DE5CC1088E2
0x0008D330: 01002DE90800DDE501002DE90D00DDE5
0x0008D340: 01002DE91600DDE501002DE91900DDE5
0x0008D350: 01002DE91C00DDE501002DE910002DE9
0x0008D360: 00082DE920002DE940002DE970309DE5
0x0008D370: 48209DE50A00A0E1160000EF28D08DE2
0x0008D380: 0000A0E301002DE90030A0E30220A0E3
0x0008D390: 0010A0E10900A0E10F0000EF0A00A0E1
0x0008D3A0: 1B0000EF0030A0E30020A0E10A10A0E1
0x0008D3B0: 0900A0E10C0000EF401EA0E30A00A0E1
0x0008D3C0: 1D0100EF0A00A0E1150000EF0010A0E3
0x0008D3D0: 0900A0E10D0000EF28D08DE2F08FBDE8
0x0008D3E0: 44D708A0F0412DE9A4609FE564D04DE2
0x0008D3F0: 8C5196E80040A0E10C008DE28C5180E8
0x0008D400: 0150A0E1450100EF0078A0E10510A0E1
0x0008D410: 0D00A0E12AFFFFFA0500A0E101002DE9
0x0008D420: 4778A0E10720A0E1181086E20400A0E1
0x0008D430: 01002DE914008DE201002DE90C308DE2
0x0008D440: 30008DE2160000EF30108DE20100A0E3
0x0008D450: 4E0000EF0000A0E301002DE901002DE9
0x0008D460: 0030A0E30720A0E10510A0E120008DE2
0x0008D470: 01002DE918008DE201002DE90000A0E3
0x0008D480: 01002DE90400A0E16AFFFFEB84D08DE2
0x0008D490: F081BDE8CCD808A0F0402DE90150A0E1
0x0008D4A0: A0109FE564D04DE2CC5091E80040A0E1
0x0008D4B0: 0C008DE2CC5080E8450100EF0068A0E1
0x0008D4C0: 0510A0E10D00A0E1FDFEFFFA2C119FE5
0x0008D4D0: 0500A0E101002DE94668A0E10620A0E1
0x0008D4E0: 0400A0E101002DE914008DE201002DE9
0x0008D4F0: 0C308DE230008DE2160000EF30108DE2
0x0008D500: 0100A0E34E0000EF0000A0E301002DE9
0x0008D510: 01002DE90030A0E30620A0E10510A0E1
0x0008D520: 20008DE201002DE918008DE201002DE9
0x0008D530: 0000A0E301002DE90400A0E13DFFFFEB
0x0008D540: 84D08DE2F080BDE804D908A0F0402DE9
0x0008D550: 0150A0E1A0109FE564D04DE2CC5091E8
0x0008D560: 0040A0E10C008DE2CC5080E8450100EF
0x0008D570: 0068A0E10510A0E10D00A0E1D0FEFFFA
0x0008D580: 78109FE50500A0E101002DE94668A0E1
0x0008D590: 0620A0E10400A0E101002DE914008DE2
0x0008D5A0: 01002DE90C308DE230008DE2160000EF
0x0008D5B0: 30108DE20100A0E34E0000EF0000A0E3
0x0008D5C0: 01002DE901002DE90030A0E30620A0E1
0x0008D5D0: 0510A0E120008DE201002DE918008DE2
0x0008D5E0: 01002DE90000A0E301002DE90400A0E1
0x0008D5F0: 10FFFFEB84D08DE2F080BDE81CD908A0
0x0008D600: E4D808A030402DE950509FE50040A0E1
0x0008D610: 0000D5E5000050E30200000A2010A0E3
0x0008D620: 040085E21D0100EF0410A0E1040085E2
0x0008D630: 1A0000EF0100A0E30000C5E53080BDE8
0x0008D640: 10402DE914409FE52010A0E3040084E2
0x0008D650: 1D0100EF0000A0E30000C4E51080BDE8
0x0008D660: 0001F0A8F0412DE960D04DE20040A0E1
0x0008D670: 0180A0E10250A0E10360A0E1450100EF
0x0008D680: 0810A0E1A4809FE50078A0E10C20A0E3
0x0008D690: 0D00A0E1D0FEFFEB0C20A0E3041088E2
0x0008D6A0: 10008DE21E0100EF0010A0E31C10CDE5
0x0008D6B0: 7C109FE510008DE201002DE94778A0E1
0x0008D6C0: 0430A0E10720A0E104008DE201002DE9
0x0008D6D0: 0500A0E101002DE92C008DE2160000EF
0x0008D6E0: 2C108DE20100A0E34E0000EF0100A0E3
0x0008D6F0: 01002DE90430A0E10720A0E10010A0E3
0x0008D700: 10008DE201002DE9040088E201002DE9
0x0008D710: 0000A0E301002DE920002DE90600A0E1
0x0008D720: C4FEFFEBC5FFFFEB80D08DE2F081BDE8
0x0008D730: 0001F0A834D908A0240000000001F0A8
0x0008D740: 0001F0A8303A5C6572726F72732E6C6F
0x0008D750: 670000005B457863657074696F6E5D0D
0x0008D760: 0A436F64653A203C554E4B3E0D0A5479
0x0008D770: 70653A203C554E4B3E0D0A4D4E616D65
0x0008D780: 3A203C554E4B3E0D0A464E616D653A20
0x0008D790: 25730D0A43657049443A203078253034
0x0008D7A0: 580D0A416464726573733A2030782530
0x0008D7B0: 3858200D0A435053523A203078253038
0x0008D7C0: 580D0A4350554D6F64653A2025730D0A
0x0008D7D0: 435055466C6167733A2025730D0A5469
0x0008D7E0: 6D653A20253032643A253032643A2530
0x0008D7F0: 32640D0A446174653A20253032642D25
0x0008D800: 3032642D253034640D0A0D0A00000000
0x0008D810: 5B5069636B4F46465D0D0A436F64653A
0x0008D820: 203078253034580D0A547970653A2030
0x0008D830: 78253034580D0A4D4E616D653A202573
0x0008D840: 0D0A464E616D653A2025730D0A436570
0x0008D850: 49443A203078253034580D0A41646472
0x0008D860: 6573733A203078253038580D0A435053
0x0008D870: 523A203C554E4B3E0D0A4350554D6F64
0x0008D880: 653A203C554E4B3E0D0A435055466C61
0x0008D890: 67733A203C554E4B3E0D0A54696D653A
0x0008D8A0: 20253032643A253032643A253032640D
0x0008D8B0: 0A446174653A20253032642D25303264
0x0008D8C0: 2D253034640D0A0D0A000000556E642E
0x0008D8D0: 20496E7374727563742E210000000000
0x0008D8E0: 000000005049443A20253034582C2025
0x0008D8F0: 730A25730A3078253038580A30782530
0x0008D900: 38580000507265666574636820416274
0x0008D910: 21000000000000000000000044617461
0x0008D920: 2041626F727421000000000000000000
0x0008D930: 0000000043657049443A203078253034
0x0008D940: 580A253034582C20253034580A25730A
0x0008D950: 25730000
#pragma disable old_equal_ff

;STORE_STRING_HOOK
0x004CCC58: 0050A0E1 1401EFEB
;STORE_AND_ABORT_HOOK
0x004CCDD8: D0449FE500C094E500005CE3 0E30A0E12002EFEB3880BDE8
;UI_HANDLER
0x012D1194: 74030000 00D008A0
;PA_HANDLER,DA_HANDLER
0x012D119C: 2401000040000000 34D008A06CD008A0

;------------------------- end -------------------------

