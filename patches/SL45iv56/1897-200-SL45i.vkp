;SL45iv56
;CDR. Детальная запись звонков и SMS на ММС
;CDR. Call and SMS Detail Record
;(c) rizapn
;Version: 2.3
;! доступна новая версия патча, https://patches.kibab.com/patches/details.php5?id=6794
;PatchID: 1897
;Details: https://patches.kibab.com/patches/details.php5?id=1897
;!к патчу прикреплён файл, https://patches.kibab.com/cnt.php5?d=sl45iv56&f=200-SL45i.rar

/*
Сохраняет детальную инфу о звонках.
Работает для входящих(I), исходящих(O), неотвеченных(U) звонков.
Сохраняет в A:\Misc\CDR.log
Формат : yyyy-mm-dd,hh:mm,flag,Number,Duration (flag:I,O,U)
v1.1-> I и O флаги - исправлен баг
v1.1 -> меняется через APP меню - Профиль 2 - 2 пункт
v2 -> SMS отчёт в A:\Misc\sdyyyymm.log 
   SMS флаги:S(end),R(eceived),D(eliveryReport) 
v2.2 -> Имя для звонков. 
v2.3 -> можно хранить U,I,O в разных файлах 
!!! Кирилличиские имена сохраняются неправильно !!!

В прикрепленном архиве находится мидлет LogReader.
Патч №200 (обновление 3) с http://patch.oslik.ru/SL45_RU


English:
Save call detail record into the MMC (call logging function). 
It will logs the successfull incoming and outgoing call, and unanswered incoming calls. 
Logfile is A:\Misc\cdyyyymm.log -> yyyy=year, mm=month 
Default format: yyyy/mm/dd,flag,DN,duration,Name 

v1.1 -> Selectable through the APP - Profile 2 - 2nd Item 
v2 -> add SMS record in A:\Misc\sdyyyymm.log SMS
flag:S(end),R(eceived),D(eliveryReport) 
v2.2 -> Add name for Call Detail Record 

LogReader midlet are attached.


Created: August 5, 2004 
Updated: August 13, 2004 (v2.3) 
*/
;для логов звонков: 
0x02F560: F2F8FE38 DAE47052 
0x44E6FC: E6FE2600 DAE4CE52 

;для лога отправленных sms: 
0x44E6FC: E6FE2600 DAE4CE52 

;для лога полученных sms: 
0x39BE3C: E6FC4831 DAE4B852 
0x39BE8C: E6FC4831 DAE4B852 

0x445260: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 2A2A2A204344522076322E33202A2A2A 
0x445270: FFFF BB1D 

;Если Вы хотите изменить пункт АРР для записи звонков, 
;измените (10 на z0) : 
0x445272: FFFFFFFF 9AF11710 

0x445276: FFFFFFFF 48442D02 

;Запись входящих и неотвеченных: 
0x44527A: FFFF 4843 

;Запись только исходящих звонков: 
;0x44527A: FFFF 4844 

0x44527C: FFFFFFFF 3D1306FC 
0x445280: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 7E0BE6F53200885088C0E6F855014843 
0x445290: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 2D08E6F84F01F0C9DACCC2C42D02E6F8 
0x4452A0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 4901BB31E6F8A7059890DB008890D740 
0x4452B0: FFFF 3600 

;Возможность выбора в АРР меню: 
0x4452B2: FFFFFFFF F2F16C09 

;Невозможность выбора: 
;0x4452B2: FFFFFFFF E6F1FFFF 

0x4452B6: FFFFFFFFFFFF CB00BBF98880 

;Если Вы хотите изменить пункт АРР для отправленных SMS, 
;измените это (10 на z0) : 
0x4452BC: FFFFFFFF 9AF11D10 

0x4452C0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 06F83A0088908880E6F853000D15BBEE 
0x4452D0: FFFF 8880 

;Если Вы хотите изменить пункт АРР для полученных SMS, 
;измените это (10 на z0) : 
0x4452D2: FFFFFFFF 9AF11210 

0x4452D6: FFFFFFFFFFFFFFFFFFFF E6F85202E6FC1503E6F5 
0x4452E0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 3200DC45F3F8F00267F840002D03E6F8 
0x4452F0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 440208C1885088C0BB06E6FE2600E6FC 
0x445300: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 483198800DD1E6FC6839E6FD3700E6FE 
0x445310: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 2215E6FF9103DAC71685E6F70A15E6F9 
0x445320: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 7239BB1E2891BB1CE7F87300E6F97039 

0x445330: FFFFFFFF F05849B1 

;Различные имена файлов для SMS и звонков: 
0x445334: FFFF 3D05 

;Одинаковые имена файлов для SMS и звонков: 
;0x445334: FFFF 3D06 

0x445336: FFFFFFFF 47FA4F00 

;Различные имена файлов для входящих и исходящих звонков: 
0x44533A: FFFF 2D03 

;Одинаковые имена файлов для входящих и исходящих звонков: 
;0x44533A: FFFF 0D03

;Различные имена файлов для входящих и неотвеченных звонков:
0x44533C: FFFFFFFF F18ACC00

;Одинаковые имена файлов для входящих и неотвеченных звонков:
;0x44533C: FFFFFFFF E7F86900

0x445340: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF BB38E6F98139BB0C3DFEF049E6F98039 
0x445350: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 20492841BB2EDAE47254DAE4D054CB00 
0x445360: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF E02FD74091039987C08C2D2848C58D0C 
0x445370: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 2D0A28C648C4ED1600CCD7409103D4CC 
0x445380: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF F614AB0C0D0FE04FE7F8300000CCD740 
0x445390: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 0D00D4CCDA25F0D9F03FBB0BA0133DFD 
0x4453A0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF DAC73684D740910399872D0847F80D00 
0x4453B0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 2D37E6FE3700DC4EB9890891CB0098C0 
0x4453C0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 9850F04849903D03F0ECF0F50D22DC55 
0x4453D0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 995C996C49912D0209537C1247F68100 
0x4453E0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 2D03E7F82B00BBE5E1F447F50C00ED0A 
0x4453F0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 29512D08DC45996CF176BB30F1677C43 
0x445400: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF BB2D3DF6CB00F04849913D09E6FE5302 
0x445410: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF E0CFE6FD3700F0C9DAC71685F09CCB00 
0x445420: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF E6F40D0A0D23F0480DC4F04849913D1D 
0x445430: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF E6FE562C47F84F003D02E6FE9A2BE08F 
0x445440: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF F0CEDC4F998C09813DFC28C1DC5FB98C 
0x445450: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF A98E47F881003DDD08E30DDB61644164 
0x445460: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 2D04F18607F83000BBA4CB00BBA2F189 
0x445470: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 0DA0E6FE0040E6FD2000E00CE6F5E400 
0x445480: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF E6F49C54D7703600885E884E88DE88CE 
0x445490: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF E00CBB25DAD712D90804DB00E6FE0A01 
0x4454A0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF E6FD3700E6FC6839E6FF0001DADF3EA7 
0x4454B0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF F0C408412D1388C0E6FD8039E6FE3700 
0x4454C0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF DC4E998DC08FDADFFEB098C0FADF70C5 
0x4454D0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF E6FC9017BB04DAD77CD90804DB00E00D 
0x4454E0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 88D088C0E6FCFE14E6FD9103E6FE0014 
0x4454F0: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF E6FFE202CB002654BE532A540654613A 
0x445500: FFFFFFFFFFFFFFFFFFFFFFFFFFFF 5C4D6973635C7A7A7A00052D042E 

;Ниже приведены коды полей информации и разделители после них, 
;изменяйте как Вам нравиться: 

; Коды полей: 01=минуты,02=час,03=дата,04=месяц,05=год, 
; 06=флаг,07=номер телефона,08=имя,09=время разговора,00=конец данных 
; Значения разделителей: 0D=<ENTER>,00=конец данных, другие значения=ASCII, 
; 20=пробел, 2C="," , 2D="-", 2E=".", 3A=":", 
; Их можно переставлять,например чтобы получить "DD.MM.YYYY," надо: 
;0x44550E: FFFF 032E 
;0x445510: FFFF 042E 
;0x445512: FFFF 052C 

; Исходные данные Ризы 

0x44550E: FFFF 052F ; year 
0x445510: FFFF 042F ; month 
0x445512: FFFF 032C ; date 
0x445514: FFFF 023A ; hour 
0x445516: FFFF 012C ; minutes 
0x445518: FFFF 062C ; flag 
0x44551A: FFFF 072C ; DN 
0x44551C: FFFF 092C ; duration 
0x44551E: FFFF 080D ; Name 
0x445520: FFFF 0000 ; end_of_data 

; (для примера) dd hh:mm flag DN duration Name 
;0x44550E: FFFF 0320 ; date 
;0x445510: FFFF 023A ; hour 
;0x445512: FFFF 0120 ; minutes 
;0x445514: FFFF 0620 ; flag 
;0x445516: FFFF 0720 ; DN 
;0x445518: FFFF 0920 ; duration 
;0x44551A: FFFF 080D ; Name 
;0x44551C: FFFF 0000 ; end_of_data 
;0x44551E: FFFF 052F ; year 
;0x445520: FFFF 042F ; month 


0x445522: FFFFFFFFFFFFFFFFFFFFFFFFFFFF 613A5C4D6973635C636479797979 
0x445530: FFFFFFFFFFFFFFFF 6D6D2E6C6F670000
;------------------------- end -------------------------

