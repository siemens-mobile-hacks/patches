;SL45iv56
;FTA. Асоциации типов файлов
;FTA. File Type Association
;(c) Rst7/CBSIE
;Version: 2.1
;PatchID: 2092
;Details: https://patches.kibab.com/patches/details.php5?id=2092
/*
Необходим FAM3.2 и ESI, откатить все барахло FAM2 и кто его пользует (JSTV и остальное). 
 
Использует текстовый файл A:\execute.ext в виде 
... 
расширение:полный_путь_и_имя_бинарника 
... 
 
Одна строка - одно расширение. Без пробелов! 
Для неизвестных расширений - запуск бинарника в последней записи 
 
Для кодеров: полный путь и имя открываемого 
файла передается в бинарник через R12/R13 как 
far-указатель на ASCIIZ строку. 
 
Сравнить R13 (_pof(commandline)) с 0x35 - если равно, то запущен через FTA, иначе через BFA.

Версия 2.1->Не зависима от регистра символов расширения и записи в execute.ext


English: Need FAM3.2 & ESI patch. Undo all FAM2 stuff and patches, used FAM2 (JSTV and other) 
 
Patch use text file A:\execute.ext as 
... 
file_extention:full_path_and_name_of_binfile 
... 
 
One line - one extention. Without spaces! 
If extention not found, run last binfile defined in execute.ext 
 
For coders: full path and name of openfile passed to binfile trows R12/R13 
as far pointer to ASCIIZ string 

Check R13 (_pof(commandline)) for 0x35 - if equ then run from FTA, else run from BFA

Version 2.1->Use any case of chars in file extention and record in execute.ext 
*/

003874CE: EAE01876 FAE4304F 
#pragma enable old_equal_ff 
00444F20: 2A2A2A204654412076322E31202A2A2AEAE0384FFAD8D274F0E8F0F906FEB200 
00444F40: E6FCBA51E6FDE400DAE4FC7FFAD81876F04CF05DFAE4C07E 
; 
; A:\execute.ext there 
; A:\execute.ext здесь 
; 
00444F58: 413A5C657865637574652E657874000000000000000000000000000000000000 
; 
00444F78: 071291032E1291031E129103 
00444F84: 889088808870886026F00801F07DF06CE009E00CE00DC4C00201C4D00401F0C6 
00444FA4: F0D7DAC73685F084EA20A85146F87F00EAE0A851F0C6F0D7DAC736850064F0C6 
00444FC4: F0D70D0828813D05E6F60612E6F791030D072861DC47F426FFFF47F22E003DF2 
00444FE4: E6FC580FE6FD9103E00EE00FDADF3EA7C440000146F4FFFFEA209E51F0C4F0D0 
00445004: 66FDFF3FF2FE02FEE6FF8000DADFAEABF084E6FC8000C4C0060146F880009D17 
00445024: E1020080B9280D2CE6F880008880E02C00C066FCFF3FF2FD02FEE6FE820000E0 
00445044: 66FEFF3FF2FF02FEDAC7B4830802D4C00001E6FD800000D066FDFF3FF2FE02FE 
00445064: E6FF8000DADFAEABF08446F880009D08E1020080E4288000E6F80001C4800601 
00445084: E008D4C00601408C2DCFF0D8088100D0A92DEA20205146F9FFFF2D0446F9FEFF 
004450A4: 2D0F0D1647F23A003D0BF0C066FCFF3FF2FD02FE00C8C4C00201C4D004012891 
004450C4: 47F20D002D0347F20A003DDBE0090DD947F20D002D0347F20A003D02E0090DD1 
004450E4: 47F23A003D06F0C6F0D700C9DC4DA94C2D21F011C02CDADF3ACE8840F0C6F0D7 
00445104: 00C9DC4DA92CC02CDADF3ACE981041283D0208910DB6E6F9FFFF0DB3D4800201 
00445124: D490040170893D10E01CE6FD290EDAE638F10D38F09066F9FF3FF2F602FE0098 
00445144: C4900201C4600401D4C00001DADF70C5E0080D010881D4C00201D4D0040100C8 
00445164: DC4DA9CC47FC1F00EDF5E10CDC4DB9CCD4C00201D4D00401E00EE00FDADF3EA7 
00445184: C440000146F4FFFF3D05E01CE6FD280EDAE638F1D44000010D07E01CE6FD270E 
004451A4: DAE638F1E6F4FFFF06F008019860987098809890DB00889088808860F06DF09C 
004451C4: E6FC780FE6FD9103DAE4504FF0C9F0D6DAE4844FF08446F8FFFF2D0FF0C8E00D 
004451E4: E6FE2000E6FF0040DADFAEABF0C8DADF70C5F0C9F0D6DA080000986098809890 
00445204: DB00 
00445206: 00455845435554452E4558540D6E6F7420666F756E6421004E6F7468696E6720 
00445226: 746F2072756E210042696E2066696C650D6E6F7420666F756E642100 
#pragma disable old_equal_ff 
;------------------------- end -------------------------

